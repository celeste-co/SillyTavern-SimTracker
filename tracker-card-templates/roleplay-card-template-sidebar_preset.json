{
    "templateName": "Roleplay Sim Tracker (Right w/ Tabs)",
      "templateAuthor": "celestevlr",
    "templatePosition": "RIGHT",
    "htmlTemplate": "<!-- TEMPLATE NAME: Roleplay Sim Tracker (Right Side with Tabs) -->\r\n<!-- AUTHOR: Celeste -->\r\n<!-- POSITION: RIGHT -->\r\n\r\n<!-- CARD_TEMPLATE_START -->\r\n<style>\r\n    \/* The actual template styling *\/\r\n    .sim-tracker-container {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 20px;\r\n      width: 100%;\r\n      position: relative;\r\n      height: 100%;\r\n      pointer-events: none;\r\n    }\r\n\r\n    .sim-tracker-tabs {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 12px;\r\n      position: absolute;\r\n      right: 340px; \/* Position tabs to work with 320px card width and avoid overlap *\/\r\n      top: 0;\r\n      bottom: 0;\r\n      justify-content: center;\r\n      height: 100%;\r\n      z-index: 10; \/* Lower z-index so tabs are behind cards *\/\r\n      transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\r\n      pointer-events: auto;\r\n    }\r\n\r\n    .sim-tracker-tab {\r\n      width: 60px;\r\n      height: 60px;\r\n      border-radius: 8px;\r\n      box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);\r\n      position: relative;\r\n      backdrop-filter: blur(10px);\r\n      transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\r\n      cursor: pointer;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      background: linear-gradient(145deg, #2c2c2c, #1a1a1a);\r\n      border: 1px solid rgba(255, 255, 255, 0.05);\r\n      flex-shrink: 0;\r\n      margin: 0 8px; \/* Add some horizontal spacing *\/\r\n      transform: translateX(0); \/* No transform needed since container handles positioning *\/\r\n      z-index: 10; \/* Lower z-index so tabs are behind cards *\/\r\n      pointer-events: auto;\r\n    }\r\n\r\n    \/* Override global stylesheet for our wider cards *\/\r\n    #sst-global-sidebar-right .sim-tracker-tab.active {\r\n      transform: translateX(-320px) !important; \/* Match our 320px card width *\/\r\n      z-index: 20; \/* Higher z-index for active tab *\/\r\n    }\r\n\r\n    .tab-initials {\r\n      width: 40px;\r\n      height: 40px;\r\n      border-radius: 50%;\r\n      background: linear-gradient(145deg, #6a5acd, #5a4abc);\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      font-weight: bold;\r\n      font-size: 18px;\r\n    }\r\n\r\n    .sim-tracker-card {\r\n      background: linear-gradient(145deg, #2c2c2c, #1a1a1a);\r\n      border-radius: 18px;\r\n      padding: 20px;\r\n      width: 320px;\r\n      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\r\n      position: absolute;\r\n      backdrop-filter: blur(10px);\r\n      transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\r\n      right: 0;\r\n      top: 50%;\r\n      transform: translateY(-50%) translateX(100%);\r\n      opacity: 0;\r\n      visibility: hidden;\r\n      z-index: 5; \/* Lower z-index for inactive cards *\/\r\n      border: 1px solid rgba(255, 255, 255, 0.05);\r\n      overflow: hidden; \/* Prevent overlay from spilling over *\/\r\n    }\r\n\r\n    .sim-tracker-card.active {\r\n      transform: translateY(-50%) translateX(0);\r\n      opacity: 1;\r\n      visibility: visible;\r\n      z-index: 30; \/* Much higher z-index for active card to cover all tabs *\/\r\n    }\r\n\r\n    .sim-tracker-card.sliding-in {\r\n      transform: translateY(-50%) translateX(0);\r\n      opacity: 1;\r\n      visibility: visible;\r\n      z-index: 30; \/* Much higher z-index for active card to cover all tabs *\/\r\n    }\r\n\r\n    .sim-tracker-card.sliding-out {\r\n      transform: translateY(-50%) translateX(300px);\r\n      opacity: 0;\r\n      visibility: hidden;\r\n      z-index: 5;\r\n    }\r\n\r\n    .sim-tracker-card.inactive {\r\n      opacity: 1; \/* Reset opacity since we're using overlay *\/\r\n      z-index: 25; \/* Higher z-index for inactive cards to prevent tab overlap *\/\r\n    }\r\n\r\n    .sim-tracker-card.inactive.active {\r\n      z-index: 30; \/* Even higher for active inactive cards *\/\r\n    }\r\n\r\n    .character-header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: flex-start;\r\n      margin-bottom: 18px;\r\n    }\r\n\r\n    .character-name {\r\n      font-size: 1.3em;\r\n      font-weight: 600;\r\n      color: #ffffff;\r\n    }\r\n\r\n    .status-indicator {\r\n      font-size: 1.4em;\r\n    }\r\n\r\n    .stats-container {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 16px;\r\n    }\r\n\r\n    .stat-item {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 6px;\r\n    }\r\n\r\n    .stat-header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      font-size: 0.9em;\r\n      color: rgba(255, 255, 255, 0.7);\r\n    }\r\n\r\n    .stat-bar-bg {\r\n      height: 8px;\r\n      background: rgba(255, 255, 255, 0.1);\r\n      border-radius: 4px;\r\n      overflow: hidden;\r\n    }\r\n\r\n    .stat-bar-fill {\r\n      height: 100%;\r\n      border-radius: 4px;\r\n    }\r\n\r\n    .status-container {\r\n      margin-top: 20px;\r\n      padding-top: 16px;\r\n      border-top: 1px solid rgba(255, 255, 255, 0.05);\r\n    }\r\n\r\n    .relationship-status,\r\n    .desire-status {\r\n      margin-bottom: 10px;\r\n      font-size: 0.95em;\r\n      color: rgba(255, 255, 255, 0.9);\r\n    }\r\n\r\n    .days-counter {\r\n      text-align: left;\r\n      font-style: italic;\r\n      color: rgba(255, 255, 255, 0.8);\r\n      font-size: 1em;\r\n      margin-bottom: 15px;\r\n      padding-bottom: 10px;\r\n      border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n    }\r\n\r\n    .thought-bubble {\r\n      margin-top: 6px;\r\n      padding: 15px;\r\n      background: rgba(255, 255, 255, 0.05);\r\n      border-radius: 12px;\r\n      border: 1px solid rgba(255, 255, 255, 0.08);\r\n    }\r\n\r\n    .thought-label {\r\n      position: relative;\r\n      padding-top: 8px;\r\n      font-size: 11px;\r\n      font-weight: 500;\r\n      color: rgba(255, 255, 255, 0.7);\r\n      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\r\n      letter-spacing: 0.25px;\r\n    }\r\n\r\n    \/* Overlay for inactive characters *\/\r\n    .narrative-inactive-overlay {\r\n      position: absolute;\r\n      top: -5px;\r\n      left: -5px;\r\n      width: calc(100% + 10px);\r\n      height: calc(100% + 10px);\r\n      background-color: black;\r\n      opacity: 0.5;\r\n      border-radius: 18px;\r\n      display: none;\r\n      z-index: 100; \/* High z-index to cover all content *\/\r\n      pointer-events: none; \/* Allow clicks to pass through to underlying elements *\/\r\n    }\r\n\r\n    .narrative-inactive .narrative-inactive-overlay {\r\n      display: block;\r\n    }\r\n\r\n    \/* Roleplay-specific styles *\/\r\n    .world-info-header {\r\n      margin-bottom: 18px;\r\n      padding-bottom: 12px;\r\n      border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n    }\r\n\r\n    .days-departure {\r\n      font-size: 0.9em;\r\n      color: rgba(255, 255, 255, 0.8);\r\n      font-weight: 600;\r\n    }\r\n\r\n    .weather {\r\n      font-size: 0.9em;\r\n      color: rgba(255, 255, 255, 0.8);\r\n    }\r\n\r\n    .level-indicator {\r\n      font-size: 1em;\r\n      color: rgba(255, 255, 255, 0.9);\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 8px;\r\n    }\r\n\r\n    .stats-grid {\r\n      display: grid;\r\n      grid-template-columns: 1fr 1fr;\r\n      gap: 12px;\r\n      margin-bottom: 16px;\r\n    }\r\n\r\n    \/* Auto-adjust grid for single items *\/\r\n    .stats-grid:has(.disposition-stat:only-child) {\r\n      grid-template-columns: 1fr;\r\n    }\r\n\r\n    .stat-block {\r\n      background: rgba(255, 255, 255, 0.05);\r\n      border-radius: 8px;\r\n      padding: 8px;\r\n    }\r\n\r\n    .stat-label {\r\n      font-size: 0.8em;\r\n      color: rgba(255, 255, 255, 0.7);\r\n      margin-bottom: 4px;\r\n    }\r\n\r\n    .stat-value {\r\n      font-size: 0.95em;\r\n      font-weight: 600;\r\n      color: rgba(255, 255, 255, 0.9);\r\n    }\r\n\r\n    .abilities-section {\r\n      margin: 16px 0;\r\n    }\r\n\r\n    .section-title {\r\n      font-size: 0.9em;\r\n      font-weight: 600;\r\n      color: rgba(255, 255, 255, 0.8);\r\n      margin-bottom: 8px;\r\n      text-transform: uppercase;\r\n      letter-spacing: 0.5px;\r\n    }\r\n\r\n    .abilities-grid {\r\n      display: grid;\r\n      grid-template-columns: repeat(3, 1fr);\r\n      gap: 8px;\r\n    }\r\n\r\n    .ability-score {\r\n      background: rgba(255, 255, 255, 0.05);\r\n      border-radius: 6px;\r\n      padding: 6px;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n    }\r\n\r\n    .ability-name {\r\n      font-size: 0.8em;\r\n      color: rgba(255, 255, 255, 0.7);\r\n      font-weight: 600;\r\n    }\r\n\r\n    .ability-value {\r\n      font-size: 0.9em;\r\n      font-weight: bold;\r\n      color: rgba(255, 255, 255, 0.9);\r\n    }\r\n\r\n    .goal-section {\r\n      margin: 16px 0;\r\n      background: rgba(255, 255, 255, 0.03);\r\n      border-radius: 8px;\r\n      padding: 12px;\r\n    }\r\n\r\n    .goal-text {\r\n      font-size: 0.9em;\r\n      line-height: 1.4;\r\n      color: rgba(255, 255, 255, 0.85);\r\n      font-style: italic;\r\n    }\r\n\r\n    .info-sections {\r\n      margin: 16px 0;\r\n    }\r\n\r\n    .info-item {\r\n      margin-bottom: 12px;\r\n    }\r\n\r\n    .info-label {\r\n      font-size: 0.8em;\r\n      color: rgba(255, 255, 255, 0.7);\r\n      margin-bottom: 4px;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .info-text {\r\n      font-size: 0.9em;\r\n      color: rgba(255, 255, 255, 0.9);\r\n      line-height: 1.3;\r\n    }\r\n\r\n    .inventory-section {\r\n      margin: 16px 0;\r\n    }\r\n\r\n    .inventory-items {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      gap: 6px;\r\n    }\r\n\r\n    .inventory-item {\r\n      background: rgba(255, 255, 255, 0.1);\r\n      border-radius: 4px;\r\n      padding: 4px 8px;\r\n      font-size: 0.8em;\r\n      color: rgba(255, 255, 255, 0.8);\r\n    }\r\n\r\n    .inventory-text {\r\n      font-size: 0.9em;\r\n      color: rgba(255, 255, 255, 0.85);\r\n      line-height: 1.3;\r\n    }\r\n\r\n    \/* NPC-specific styles *\/\r\n    .npc-info {\r\n      margin-bottom: 16px;\r\n    }\r\n\r\n    \/* Specific stat block styling *\/\r\n    .level-stat {\r\n      grid-column: span 1;\r\n    }\r\n\r\n    .health-stat {\r\n      grid-column: span 1;\r\n    }\r\n\r\n    .stamina-stat {\r\n      grid-column: span 1;\r\n    }\r\n\r\n    .disposition-stat {\r\n      grid-column: span 2; \/* Full width for disposition bar *\/\r\n    }\r\n\r\n    \/* Clothing items styling to match inventory *\/\r\n    .clothing-items {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      gap: 6px;\r\n      margin-top: 4px;\r\n    }\r\n\r\n    \/* Section separator *\/\r\n    .section-separator {\r\n      height: 1px;\r\n      background: rgba(255, 255, 255, 0.1);\r\n      margin: 16px 0;\r\n    }\r\n\r\n    \/* Disposition section *\/\r\n    .disposition-section {\r\n      margin: 16px 0;\r\n    }\r\n\r\n    .disposition-bar-fill {\r\n      height: 100%;\r\n      border-radius: 4px;\r\n      transition: width 0.3s ease;\r\n    }\r\n\r\n    .disposition-excellent {\r\n      background: linear-gradient(90deg, #44ff44, #66ff66);\r\n    }\r\n\r\n    .disposition-good {\r\n      background: linear-gradient(90deg, #88ff88, #aaffaa);\r\n    }\r\n\r\n    .disposition-neutral {\r\n      background: linear-gradient(90deg, #ffff44, #ffff88);\r\n    }\r\n\r\n    .disposition-poor {\r\n      background: linear-gradient(90deg, #ff8844, #ffaa66);\r\n    }\r\n\r\n    .disposition-hostile {\r\n      background: linear-gradient(90deg, #ff4444, #ff6666);\r\n    }\r\n\r\n    \/* Mobile-specific adjustments for interactivity *\/\r\n    @media (max-width: 768px) {\r\n        .sim-tracker-tabs {\r\n            right: 0; \/* Adjust position to avoid overlap on mobile *\/\r\n            pointer-events: none; \/* Disable interactivity on container for mobile *\/\r\n        }\r\n        .sim-tracker-tab {\r\n            pointer-events: auto; \/* Keep individual tabs interactive *\/\r\n            transform: scale(0.8); \/* Optionally reduce size for mobile *\/\r\n        }\r\n        #sst-global-sidebar-right .sim-tracker-tab.active {\r\n            transform: translateX(-280px) scale(0.8) !important; \/* Adjust for mobile card width *\/\r\n        }\r\n        .sim-tracker-card {\r\n            width: 280px; \/* Reduce card width on mobile if needed *\/\r\n        }\r\n    }\r\n  <\/style>\r\n\r\n  <div class=\"sim-tracker-container\">\r\n    <div class=\"sim-tracker-tabs\">\r\n      {{#each characters}}\r\n      <div\r\n        class=\"sim-tracker-tab\"\r\n        data-character=\"{{@index}}\"\r\n        style=\"background: linear-gradient(145deg, {{adjustColorBrightness bgColor 70}} 0%, {{adjustColorBrightness darkerBgColor 60}} 50%, {{adjustColorBrightness darkerBgColor 50}} 100%);\"\r\n      >\r\n        <div\r\n          class=\"tab-initials\"\r\n          style=\"background: linear-gradient(145deg, {{adjustColorBrightness bgColor 90}} 0%, {{adjustColorBrightness bgColor 70}} 100%);\"\r\n        >\r\n          {{initials characterName}}\r\n        <\/div>\r\n      <\/div>\r\n      {{\/each}}\r\n    <\/div>\r\n\r\n    {{#each characters}}\r\n    <div\r\n      class=\"sim-tracker-card {{#if stats.inactive}}narrative-inactive{{\/if}} {{#if (eq stats.characterType 'user')}}user-character{{else}}npc-character{{\/if}}\"\r\n      data-character=\"{{@index}}\"\r\n      style=\"background: linear-gradient(145deg, {{adjustColorBrightness bgColor 70}} 0%, {{adjustColorBrightness darkerBgColor 60}} 50%, {{adjustColorBrightness darkerBgColor 50}} 100%);\"\r\n    >\r\n      <!-- Overlay for inactive characters -->\r\n      <div class=\"narrative-inactive-overlay\"><\/div>\r\n\r\n      {{#if (eq stats.characterType 'user')}}\r\n      <!-- USER CHARACTER CARD -->\r\n      <!-- Day and weather info at the top -->\r\n      <div class=\"world-info-header\">\r\n        {{#if stats.daysSinceDeparture}}\r\n        <div class=\"days-departure\">Day {{stats.daysSinceDeparture}}<\/div>\r\n        {{\/if}}\r\n        {{#if stats.weather}}\r\n        <div class=\"weather\">\uD83C\uDF24\uFE0F {{stats.weather}}<\/div>\r\n        {{\/if}}\r\n      <\/div>\r\n\r\n      <!-- Character header with name -->\r\n      <div class=\"character-header\">\r\n        <div class=\"character-name\">{{characterName}}<\/div>\r\n        <div class=\"status-indicator\">\r\n          {{#if stats.inactive}} \uD83D\uDCA4 {{else}}\r\n            {{#if stats.health}}\r\n              {{#if (gt stats.health 80)}} \u2764\uFE0F {{else if (gt stats.health 40)}} \uD83E\uDD15 {{else}} \uD83D\uDC80 {{\/if}}\r\n            {{else}} \u26A1 {{\/if}}\r\n          {{\/if}}\r\n        <\/div>\r\n      <\/div>\r\n\r\n      <!-- Character Stats -->\r\n      <div class=\"stats-grid\">\r\n        {{#if stats.level}}\r\n        <div class=\"stat-block level-stat\">\r\n          <div class=\"stat-label\">Level<\/div>\r\n          <div class=\"stat-value\">Lv.{{stats.level}} {{#if stats.xp}}({{stats.xp}} XP){{\/if}}<\/div>\r\n        <\/div>\r\n        {{\/if}}\r\n\r\n        {{#if stats.health}}\r\n        <div class=\"stat-block health-stat\">\r\n          <div class=\"stat-label\">Health<\/div>\r\n          <div class=\"stat-value\">{{stats.health}}\/100<\/div>\r\n          <div class=\"stat-bar-bg\">\r\n            <div class=\"stat-bar-fill\" style=\"width: {{stats.health}}%; background: linear-gradient(90deg, #ff4444, #44ff44);\"><\/div>\r\n          <\/div>\r\n        <\/div>\r\n        {{\/if}}\r\n\r\n        {{#if stats.coins}}\r\n        <div class=\"stat-block\">\r\n          <div class=\"stat-label\">\uD83D\uDCB0 Coins<\/div>\r\n          <div class=\"stat-value\">{{stats.coins}}<\/div>\r\n        <\/div>\r\n        {{\/if}}\r\n\r\n        {{#if stats.stamina}}\r\n        <div class=\"stat-block stamina-stat\">\r\n          <div class=\"stat-label\">\u26A1 Stamina<\/div>\r\n          <div class=\"stat-value\">{{stats.stamina}}\/100<\/div>\r\n          <div class=\"stat-bar-bg\">\r\n            <div class=\"stat-bar-fill\" style=\"width: {{stats.stamina}}%; background: linear-gradient(90deg, #4444ff, #88aaff);\"><\/div>\r\n          <\/div>\r\n        <\/div>\r\n        {{\/if}}\r\n      <\/div>\r\n\r\n      <!-- Ability Scores -->\r\n      {{#if stats.str}}\r\n      <div class=\"abilities-section\">\r\n        <div class=\"section-title\">Abilities<\/div>\r\n        <div class=\"abilities-grid\">\r\n          <div class=\"ability-score\"><span class=\"ability-name\">STR<\/span><span class=\"ability-value\">{{stats.str}}<\/span><\/div>\r\n          <div class=\"ability-score\"><span class=\"ability-name\">DEX<\/span><span class=\"ability-value\">{{stats.dex}}<\/span><\/div>\r\n          <div class=\"ability-score\"><span class=\"ability-name\">CON<\/span><span class=\"ability-value\">{{stats.con}}<\/span><\/div>\r\n          <div class=\"ability-score\"><span class=\"ability-name\">INT<\/span><span class=\"ability-value\">{{stats.int}}<\/span><\/div>\r\n          <div class=\"ability-score\"><span class=\"ability-name\">WIS<\/span><span class=\"ability-value\">{{stats.wis}}<\/span><\/div>\r\n          <div class=\"ability-score\"><span class=\"ability-name\">CHA<\/span><span class=\"ability-value\">{{stats.cha}}<\/span><\/div>\r\n        <\/div>\r\n      <\/div>\r\n      {{\/if}}\r\n\r\n      <!-- Current Goal -->\r\n      {{#if stats.currentGoal}}\r\n      <div class=\"goal-section\">\r\n        <div class=\"section-title\">\uD83C\uDFAF Current Goal<\/div>\r\n        <div class=\"goal-text\">{{stats.currentGoal}}<\/div>\r\n      <\/div>\r\n      {{\/if}}\r\n\r\n      <!-- Location and Equipment -->\r\n      <div class=\"info-sections\">\r\n        {{#if stats.location}}\r\n        <div class=\"info-item\">\r\n          <div class=\"info-label\">\uD83D\uDCCD Location<\/div>\r\n          <div class=\"info-text\">{{stats.location}}<\/div>\r\n        <\/div>\r\n        {{\/if}}\r\n\r\n        {{#if stats.clothing}}\r\n        <div class=\"info-item\">\r\n          <div class=\"info-label\">\uD83D\uDC55 Clothing<\/div>\r\n          <div class=\"clothing-items\">\r\n            {{#if (typeof stats.clothing)}}\r\n              {{#each stats.clothing}}\r\n              <span class=\"inventory-item\">{{this}}<\/span>\r\n              {{\/each}}\r\n            {{else}}\r\n              <div class=\"inventory-text\">{{stats.clothing}}<\/div>\r\n            {{\/if}}\r\n          <\/div>\r\n        <\/div>\r\n        {{\/if}}\r\n      <\/div>\r\n\r\n      <!-- Inventory -->\r\n      {{#if stats.inventory}}\r\n      <div class=\"inventory-section\">\r\n        <div class=\"section-title\">\uD83C\uDF92 Inventory<\/div>\r\n        <div class=\"inventory-items\">\r\n          {{#if (typeof stats.inventory)}}\r\n            {{#each stats.inventory}}\r\n            <span class=\"inventory-item\">{{this}}<\/span>\r\n            {{\/each}}\r\n          {{else}}\r\n            <div class=\"inventory-text\">{{stats.inventory}}<\/div>\r\n          {{\/if}}\r\n        <\/div>\r\n      <\/div>\r\n      {{\/if}}\r\n\r\n      {{else}}\r\n      <!-- NPC CHARACTER CARD -->\r\n      <!-- Character header with name and status -->\r\n      <div class=\"character-header\">\r\n        <div class=\"character-name\">{{characterName}}<\/div>\r\n        <div class=\"status-indicator\">\r\n          {{#if stats.inactive}} \uD83D\uDCA4 {{else}}\r\n            {{#if stats.disposition}}\r\n              {{#if (gt stats.disposition 80)}} \uD83D\uDE0A\r\n              {{else if (gt stats.disposition 60)}} \uD83D\uDE42\r\n              {{else if (gt stats.disposition 40)}} \uD83D\uDE10\r\n              {{else if (gt stats.disposition 20)}} \uD83D\uDE15\r\n              {{else}} \uD83D\uDE20 {{\/if}}\r\n            {{else}} \uD83D\uDE10 {{\/if}}\r\n          {{\/if}}\r\n        <\/div>\r\n      <\/div>\r\n\r\n      <!-- Character Stats (consistent position with user) -->\r\n      <div class=\"stats-grid\">\r\n        {{#if stats.level}}\r\n        <div class=\"stat-block level-stat\">\r\n          <div class=\"stat-label\">Level<\/div>\r\n          <div class=\"stat-value\">Lv.{{stats.level}} {{#if stats.xp}}({{stats.xp}} XP){{\/if}}<\/div>\r\n        <\/div>\r\n        {{\/if}}\r\n\r\n        {{#if stats.health}}\r\n        <div class=\"stat-block health-stat\">\r\n          <div class=\"stat-label\">Health<\/div>\r\n          <div class=\"stat-value\">{{stats.health}}\/100<\/div>\r\n          <div class=\"stat-bar-bg\">\r\n            <div class=\"stat-bar-fill\" style=\"width: {{stats.health}}%; background: linear-gradient(90deg, #ff4444, #44ff44);\"><\/div>\r\n          <\/div>\r\n        <\/div>\r\n        {{\/if}}\r\n      <\/div>\r\n\r\n      <!-- Abilities for NPCs -->\r\n      {{#if stats.str}}\r\n      <div class=\"abilities-section\">\r\n        <div class=\"section-title\">Abilities<\/div>\r\n        <div class=\"abilities-grid\">\r\n          <div class=\"ability-score\"><span class=\"ability-name\">STR<\/span><span class=\"ability-value\">{{stats.str}}<\/span><\/div>\r\n          <div class=\"ability-score\"><span class=\"ability-name\">DEX<\/span><span class=\"ability-value\">{{stats.dex}}<\/span><\/div>\r\n          <div class=\"ability-score\"><span class=\"ability-name\">CON<\/span><span class=\"ability-value\">{{stats.con}}<\/span><\/div>\r\n          <div class=\"ability-score\"><span class=\"ability-name\">INT<\/span><span class=\"ability-value\">{{stats.int}}<\/span><\/div>\r\n          <div class=\"ability-score\"><span class=\"ability-name\">WIS<\/span><span class=\"ability-value\">{{stats.wis}}<\/span><\/div>\r\n          <div class=\"ability-score\"><span class=\"ability-name\">CHA<\/span><span class=\"ability-value\">{{stats.cha}}<\/span><\/div>\r\n        <\/div>\r\n      <\/div>\r\n      {{\/if}}\r\n\r\n      <!-- Separator -->\r\n      {{#if stats.relation}}\r\n      <div class=\"section-separator\"><\/div>\r\n      {{\/if}}\r\n\r\n      <!-- Disposition Bar (right after separator) -->\r\n      {{#if stats.disposition}}\r\n      <div class=\"disposition-section\">\r\n        <div class=\"stat-block disposition-stat\">\r\n          <div class=\"stat-label\">\uD83D\uDC9D Disposition<\/div>\r\n          <div class=\"stat-value\">{{stats.disposition}}\/100<\/div>\r\n          <div class=\"stat-bar-bg\">\r\n            <div class=\"disposition-bar-fill disposition-{{#if (gt stats.disposition 80)}}excellent{{else if (gt stats.disposition 60)}}good{{else if (gt stats.disposition 40)}}neutral{{else if (gt stats.disposition 20)}}poor{{else}}hostile{{\/if}}\"\r\n                 style=\"width: {{stats.disposition}}%;\"><\/div>\r\n          <\/div>\r\n        <\/div>\r\n      <\/div>\r\n      {{\/if}}\r\n\r\n      <!-- Character Info -->\r\n      <div class=\"npc-info\">\r\n        {{#if stats.relation}}\r\n        <div class=\"info-item\">\r\n          <div class=\"info-label\">\uD83E\uDD1D Relation<\/div>\r\n          <div class=\"info-text\">{{stats.relation}}<\/div>\r\n        <\/div>\r\n        {{\/if}}\r\n\r\n        {{#if stats.role}}\r\n        <div class=\"info-item\">\r\n          <div class=\"info-label\">\u2694\uFE0F Role<\/div>\r\n          <div class=\"info-text\">{{stats.role}}<\/div>\r\n        <\/div>\r\n        {{\/if}}\r\n\r\n        {{#if stats.position}}\r\n        <div class=\"info-item\">\r\n          <div class=\"info-label\">\uD83D\uDCCD Position<\/div>\r\n          <div class=\"info-text\">{{stats.position}}<\/div>\r\n        <\/div>\r\n        {{\/if}}\r\n      <\/div>\r\n\r\n      <!-- Current Thoughts -->\r\n      {{#if stats.currentThoughts}}\r\n      <div class=\"thought-label\">Thinks:<\/div>\r\n      <div class=\"thought-bubble\">\r\n        <div style=\"display: flex; align-items: flex-start; gap: 10px\">\r\n          <div style=\"font-size: 1.2em; flex-shrink: 0\">\uD83D\uDCAD<\/div>\r\n          <div style=\"font-size: 0.95em; line-height: 1.4; color: rgba(255, 255, 255, 0.85);\">\r\n            {{stats.currentThoughts}}\r\n          <\/div>\r\n        <\/div>\r\n      <\/div>\r\n      {{\/if}}\r\n      {{\/if}}\r\n    <\/div>\r\n    {{\/each}}\r\n  <\/div>\r\n  <!-- CARD_TEMPLATE_END -->\r\n\r\n  <!--\r\n  TEMPLATE VARIABLES:\r\n  - {{characters}}: Array of character objects with their data\r\n  - {{characterName}}: Character's name\r\n  - {{currentDate}}: Current date in YYYY-MM-DD format\r\n  - {{bgColor}}: Primary background color\r\n  - {{darkerBgColor}}: Darker variant of background color\r\n  - {{contrastColor}}: Contrast color for text against background\r\n  - {{stats.ap}}: Affection points (max 200)\r\n  - {{stats.dp}}: Desire points (max 150)\r\n  - {{stats.tp}}: Trust points (max 150)\r\n  - {{stats.cp}}: Contempt points (max 150)\r\n  - {{stats.apChange}}: Change in affection points (positive\/negative\/zero)\r\n  - {{stats.dpChange}}: Change in desire points (positive\/negative\/zero)\r\n  - {{stats.tpChange}}: Change in trust points (positive\/negative\/zero)\r\n  - {{stats.cpChange}}: Change in contempt points (positive\/negative\/zero)\r\n  - {{stats.days_since_first_meeting}}: Days since first meeting\r\n  - {{stats.preg}}: Boolean for pregnancy status\r\n  - {{stats.days_preg}}: Days pregnant (if applicable)\r\n  - {{stats.internal_thought}}: Character's internal thoughts\r\n  - {{stats.relationshipStatus}}: Relationship status text\r\n  - {{stats.desireStatus}}: Desire status text\r\n  - {{stats.inactive}}: Boolean for inactive status\r\n  - {{stats.inactiveReason}}: Number indicating reason for inactivity (0-5)\r\n  - {{healthIcon}}: Health status icon (\uD83E\uDD15 or \uD83D\uDC80)\r\n  - {{reactionEmoji}}: Reaction emoji (\uD83D\uDC4D, \uD83D\uDC4E, or \uD83D\uDE10)\r\n  - {{showThoughtBubble}}: Boolean to show\/hide thought bubble\r\n  -->\r\n",
    "sysPrompt": "## ROLEPLAY TRACKER MODE ENABLED\n\nWhen writing narrative elements, use the elements in the tracker of previous messages to affect the story (if a character has a relationship of only 20 with {{user}}, they should be harsher and distant.)\n\nAfter the narrative element of your answer, analyze chat context to determine current date, location and character development to be put in a formatted output. ALWAYS check for previous `sim` codeblocks containing formatted data.\n\n## Character Classification:\n- **User Characters** (`characterType: 'user'`): Player character(s) with world state tracking\n- **NPC Characters** (`characterType: 'npc'`): Non-player characters with relationship tracking\n\n## Field Usage Tags - CRITICAL UNDERSTANDING:\nEach custom field has a usage tag that determines which character types can use it:\n- **[BOTH]**: MANDATORY field for ALL characters (user and NPC)\n- **[USER ONLY]**: Field ONLY for user/player characters - NEVER include in NPC data\n- **[NPC ONLY]**: Field ONLY for NPC characters - NEVER include in user data\n\n## Data Management Rules:\n- **Complete Data**: Include ALL relevant fields for each character type based on their tags\n- **Strict Field Usage**: NEVER use [USER ONLY] fields for NPCs or [NPC ONLY] fields for users. Make sure you include at least the key of every field where necessary though. Keeping them empty or n/a when not in use.\n- **Consistent Updates**: Modify stats based on narrative events \n- **Realistic Progression**: Update dates, stats, and relationships logically\n- **Multi-Character Support**: Track all active characters simultaneously, marking those who are not currently in the scene as inactive. Make sure you understand which characters are present in the current scene (You can help the location of {{user}} and the character, if they are not close, mark the character as inactive.)\n- **Modifier fields**: Use modifier fields when updating a stat. The modifier field is used to indicate to the user when you modified a stat. It should be present only once (in one tracker). Do not pass a modifier value to the new tracker.\n\n## Output Protocol:\n1. **Narrative Content** - Story response first\n2. **Sim Codeblock** - Character data in correct format last\n\n### Output Structure:\n{{sim_format}}\n\n## Critical Requirements:\n- NEVER omit the sim codeblock from any response\n- Make sure every major and secondary characters are described and present in the tracker\n- Use inactive status for temporarily absent characters\n- If previous data is incomplete, reconstruct missing fields\n- If data format is incorrect, self-correct to proper structure\n- RESPECT field usage tags - do not mix user-only and NPC-only fields\n- *For modifier fields* Do not pass a modifier to the next tracker. Modifier fields should show the value modified once, and then be reset for the new tracker.\n\n**The sim codeblock with complete character data is MISSION CRITICAL and must appear at the end of every response.**\n\n",
    "customFields": [
      {
        "key": "characterType",
        "description": "[BOTH USER AND NPC] Character classification: 'user' for user (player character) OR 'npc' for non-player characters."
      },
      {
        "key": "daysSinceDeparture",
        "description": "[USER ONLY] Days since departure from starting location (number). Track journey progression for travel scenarios."
      },
      {
        "key": "weather",
        "description": "[USER ONLY] Current weather conditions with temperature (e.g., 'Bright sun, 23°C', 'Light rain, 18°C'). Keep it short and efficient, only a couple words."
      },
      {
        "key": "location",
        "description": "[USER ONLY] Hierarchical location from specific to general (e.g., 'Tavern, City, Region, Kingdom, Larger Kingdom, Continent' or 'Bedroom, Inn, Village, Region, Kingdom, Larger political entity, Continent')."
      },
      {
        "key": "level",
        "description": "[BOTH USER AND NPC] Character level (1-20). Represents overall character advancement and power."
      },
      {
        "key": "levelModified",
        "description": "[BOTH USER AND NPC] Level change indicator (-20 to 20). Use int numbers for gains (e.g., 1) and negative for losses (e.g., -1). Reset to 0 after displaying the change. Only set when level actually changes due to story events."
      },
      {
        "key": "xp",
        "description": "[BOTH USER AND NPC] Experience points (0-100 per level). Shows progress toward next level."
      },
      {
        "key": "health",
        "description": "[BOTH USER AND NPC] Health status (0-100)."
      },
      {
        "key": "healthModified",
        "description": "[BOTH USER AND NPC] Health change indicator (-100 to 100). Use int numbers for healing/gains (e.g., 15) and negative for damage/losses (e.g., -10). Reset to 0 after displaying the change. Only set when health actually changes due to story events, combat, healing, etc."
      },
      {
        "key": "coins",
        "description": "[USER ONLY] Currency amount (0-99999)."
      },
      {
        "key": "coinsModified",
        "description": "[USER ONLY] Coins change indicator (-99999 to 99999). Use int numbers for gains (e.g., 50) and negative for spending (e.g., -25). Reset to 0 after displaying the change. Only set when coins actually change due to transactions, rewards, theft, etc."
      },
      {
        "key": "stamina",
        "description": "[USER ONLY] Energy/stamina for actions and abilities (0-100). Affects character capability for strenuous activities."
      },
      {
        "key": "staminaModified",
        "description": "[USER ONLY] Stamina change indicator (-100 to 100). Use int numbers for recovery/gains (e.g., 20) and negative for exhaustion/usage (e.g., -15). Reset to 0 after displaying the change. Only set when stamina actually changes due to rest, exertion, spells, etc."
      },
      {
        "key": "clothing",
        "description": "[USER ONLY] Current clothing and accessories worn. Array of strings (e.g., ['leather armor', 'blue cloak']) or single string."
      },
      {
        "key": "inventory",
        "description": "[USER ONLY] Items carried in inventory. Array of strings (e.g., ['healing potion', 'iron sword', 'map'])"
      },
      {
        "key": "currentGoal",
        "description": "[USER ONLY] Current objective, quest, or personal goal."
      },
      {
        "key": "str",
        "description": "[BOTH USER AND NPC] Strength ability score (1-20). D&D-style attribute affecting physical power, melee combat, lifting."
      },
      {
        "key": "strModified",
        "description": "[BOTH USER AND NPC] Strength change indicator (-20 to 20). Use int numbers for attribute increases (e.g., 2) and negative for decreases (e.g., -1). Reset to 0 after displaying the change. Only set when STR actually changes due to magical effects, equipment, curses, training, etc."
      },
      {
        "key": "dex",
        "description": "[BOTH USER AND NPC] Dexterity ability score (1-20). D&D-style attribute affecting agility, reflexes, ranged combat, stealth."
      },
      {
        "key": "dexModified",
        "description": "[BOTH USER AND NPC] Dexterity change indicator (-20 to 20). Use int numbers for attribute increases (e.g., 2) and negative for decreases (e.g., -1). Reset to 0 after displaying the change. Only set when DEX actually changes due to magical effects, equipment, curses, training, etc."
      },
      {
        "key": "con",
        "description": "[BOTH USER AND NPC] Constitution ability score (1-20). D&D-style attribute affecting health, stamina, resistance to disease/poison."
      },
      {
        "key": "conModified",
        "description": "[BOTH USER AND NPC] Constitution change indicator (-20 to 20). Use int numbers for attribute increases (e.g., 2) and negative for decreases (e.g., -1). Reset to 0 after displaying the change. Only set when CON actually changes due to magical effects, equipment, curses, training, etc."
      },
      {
        "key": "int",
        "description": "[BOTH USER AND NPC] Intelligence ability score (1-20). D&D-style attribute affecting reasoning, memory, knowledge, magical ability."
      },
      {
        "key": "intModified",
        "description": "[BOTH USER AND NPC] Intelligence change indicator (-20 to 20). Use int numbers for attribute increases (e.g., 2) and negative for decreases (e.g., -1). Reset to 0 after displaying the change. Only set when INT actually changes due to magical effects, equipment, curses, training, etc."
      },
      {
        "key": "wis",
        "description": "[BOTH USER AND NPC] Wisdom ability score (1-20). D&D-style attribute affecting perception, insight, awareness, willpower."
      },
      {
        "key": "wisModified",
        "description": "[BOTH USER AND NPC] Wisdom change indicator (-20 to 20). Use int numbers for attribute increases (e.g., 2) and negative for decreases (e.g., -1). Reset to 0 after displaying the change. Only set when WIS actually changes due to magical effects, equipment, curses, training, etc."
      },
      {
        "key": "cha",
        "description": "[BOTH USER AND NPC] Charisma ability score (1-20). D&D-style attribute affecting social skills, leadership, force of personality."
      },
      {
        "key": "chaModified",
        "description": "[BOTH USER AND NPC] Charisma change indicator (-20 to 20). Use int numbers for attribute increases (e.g., 2) and negative for decreases (e.g., -1). Reset to 0 after displaying the change. Only set when CHA actually changes due to magical effects, equipment, curses, training, etc."
      },
      {
        "key": "relation",
        "description": "[NPC ONLY] Relationship to user character (e.g., 'Ally', 'Friend', 'Enemy', 'Neutral', 'Love Interest', 'Family Member', 'Mentor', 'Rival', 'Servant', 'Companion',...)."
      },
      {
        "key": "role",
        "description": "[NPC ONLY] Work, social status, or function (e.g., 'Tavern keeper', 'Royal guard', 'Merchant', 'Apprentice mage')."
      },
      {
        "key": "position",
        "description": "[NPC ONLY] Physical position/location in current scene (e.g., 'leaning against the back wall', 'sitting by the fire', 'standing guard at the door')."
      },
      {
        "key": "currentThoughts",
        "description": "[NPC ONLY] Internal thoughts and feelings about current situation or user character. In first person, as a point of view from the character. Make it a single relatively short paragraph."
      },
      {
        "key": "relationship",
        "description": "[NPC ONLY] Relationship rating toward user character (0-100): 0-20=Hostile, 21-40=Poor, 41-60=Neutral, 61-80=Good, 81-100=Excellent."
      },
      {
        "key": "relationshipModified",
        "description": "[NPC ONLY] Relationship change indicator (-100 to 100). Use int numbers for relationship improvements (e.g., 10) and negative for relationship deterioration (e.g., -5). Reset to 0 after displaying the change. Only set when relationship actually changes due to player actions, story events, etc."
      },
      {
        "key": "inactive",
        "description": "[NPC ONLY] Boolean for character presence in the scene (true/false)."
      },
      {
        "key": "inactiveReason",
        "description": "[NPC ONLY] Reason code for inactivity: 0=Active, 1=Asleep, 2=Unconscious, 3=Away from scene, 4=Incapacitated, 5=Dead."
      },
      {
        "key": "bg",
        "description": "[BOTH USER AND NPC] Character-specific hex color for card background (e.g., #6a5acd, #4a90e2). Each character should have unique, differentiable colors. Use distinct palettes: blues, greens, reds, purples, oranges. Avoid similar hues."
      }
    ],
    "extSettings": {
      "codeBlockIdentifier": "sim",
      "defaultBgColor": "#6a5acd",
      "showThoughtBubble": true,
      "hideSimBlocks": true,
      "templateFile": "user-preset-0"
    }
  }
